<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="referrer" content="no-referrer">
    

    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400|Old+Standard+TT:400' rel='stylesheet' type='text/css'>

    <link rel="icon" type="image/png" href="/favicon_16x16.png" sizes="16x16">
    <link rel="icon" type="image/png" href="/favicon_32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/favicon_128x128.png" sizes="128x128">

    <title>
      
      
         Note to Self: Using the filter and select functions from the dplyr package 
      
    </title>
    <link rel="canonical" href="/post/note-to-self-using-the-filter-function-from-the-dplyr-package/">

    <style>
  * {
    border:0;
    font:inherit;
    font-size:100%;
    vertical-align:baseline;
    margin:0;
    padding:0;
    color: black;
    text-decoration-skip: ink;
  }

  body {
    font-family:'Open Sans', 'Myriad Pro', Myriad, sans-serif;
    font-size:17px;
    line-height:160%;
    color:#1d1313;
    max-width:700px;
    margin:auto;
  }

  p {
    margin: 20px 0;
  }

  a img {
    border:none;
  }

  img {
    margin: 10px auto 10px auto;
    max-width: 100%;
    display: block;
  }

  .left-justify {
    float: left;
  }

  .right-justify {
    float:right;
  }

  pre, code {
    font: 12px Consolas, "Liberation Mono", Menlo, Courier, monospace;
    background-color: #f7f7f7;
  }

  code {
    font-size: 12px;
    padding: 4px;
  }

  pre {
    margin-top: 0;
    margin-bottom: 16px;
    word-wrap: normal;
    padding: 16px;
    overflow: auto;
    font-size: 85%;
    line-height: 1.45;
  }

  pre>code {
    padding: 0;
    margin: 0;
    font-size: 100%;
    word-break: normal;
    white-space: pre;
    background: transparent;
    border: 0;
  }

  pre code {
    display: inline;
    max-width: auto;
    padding: 0;
    margin: 0;
    overflow: visible;
    line-height: inherit;
    word-wrap: normal;
    background-color: transparent;
    border: 0;
  }

  pre code::before,
  pre code::after {
    content: normal;
  }

  em,q,em,dfn {
    font-style:italic;
  }

  .sans,html .gist .gist-file .gist-meta {
    font-family:"Open Sans","Myriad Pro",Myriad,sans-serif;
  }

  .mono,pre,code,tt,p code,li code {
    font-family:Menlo,Monaco,"Andale Mono","lucida console","Courier New",monospace;
  }

  .heading,.serif,h1,h2,h3 {
    font-family:"Old Standard TT",serif;
  }

  strong {
    font-weight:600;
  }

  q:before {
    content:"\201C";
  }

  q:after {
    content:"\201D";
  }

  del,s {
    text-decoration:line-through;
  }

  blockquote {
    font-family:"Old Standard TT",serif;
    text-align:center;
    padding:50px;
  }

  blockquote p {
    display:inline-block;
    font-style:italic;
  }

  blockquote:before,blockquote:after {
    font-family:"Old Standard TT",serif;
    content:'\201C';
    font-size:35px;
    color:#403c3b;
  }

  blockquote:after {
    content:'\201D';
  }

  hr {
    width:40%;
    height: 1px;
    background:#403c3b;
    margin: 25px auto;
  }

  h1 {
    font-size:35px;
  }

  h2 {
    font-size:28px;
  }

  h3 {
    font-size:22px;
    margin-top:18px;
  }

  h1 a,h2 a,h3 a {
    text-decoration:none;
  }

  h1,h2 {
    margin-top:28px;
  }

  #sub-header, time {
    color:#403c3b;
    font-size:13px;
  }

  #sub-header {
    margin: 0 4px;
  }

  #nav h1 a {
    font-size:35px;
    color:#1d1313;
    line-height:120%;
  }

  .posts_listing a,#nav a {
    text-decoration: none;
  }

  li {
    margin-left: 20px;
  }

  ul li {
    margin-left: 5px;
  }

  ul li {
    list-style-type: none;
  }
  ul li:before {
    content:"\00BB \0020";
  }

  #nav ul li:before, .posts_listing li:before {
    content:'';
    margin-right:0;
  }

  #content {
    text-align:left;
    width:100%;
    font-size:15px;
    padding:60px 0 80px;
  }

  #content h1,#content h2 {
    margin-bottom:5px;
  }

  #content h2 {
    font-size:25px;
  }

  #content .entry-content {
    margin-top:15px;
  }

  #content time {
    margin-left:3px;
  }

  #content h1 {
    font-size:30px;
  }

  .highlight {
    margin: 10px 0;
  }

  .posts_listing {
    margin:0 0 50px;
  }

  .posts_listing li {
    margin:0 0 25px 15px;
  }

  .posts_listing li a:hover,#nav a:hover {
    text-decoration: underline;
  }

  #nav {
    text-align:center;
    position:static;
    margin-top:60px;
  }

  #nav ul {
    display: table;
    margin: 8px auto 0 auto;
  }

  #nav li {
    list-style-type:none;
    display:table-cell;
    font-size:15px;
    padding: 0 20px;
  }

  #links {
    margin: 50px 0 0 0;
  }

  #links :nth-child(2) {
    float:right;
  }

  #not-found {
    text-align: center;
  }

  #not-found a {
    font-family:"Old Standard TT",serif;
    font-size: 200px;
    text-decoration: none;
    display: inline-block;
    padding-top: 225px;
  }

  @media (max-width: 750px) {
    body {
      padding-left:20px;
      padding-right:20px;
    }

    #nav h1 a {
      font-size:28px;
    }

    #nav li {
      font-size:13px;
      padding: 0 15px;
    }

    #content {
      margin-top:0;
      padding-top:50px;
      font-size:14px;
    }

    #content h1 {
      font-size:25px;
    }

    #content h2 {
      font-size:22px;
    }

    .posts_listing li div {
      font-size:12px;
    }
  }

  @media (max-width: 400px) {
    body {
      padding-left:20px;
      padding-right:20px;
    }

    #nav h1 a {
      font-size:22px;
    }

    #nav li {
      font-size:12px;
      padding: 0 10px;
    }

    #content {
      margin-top:0;
      padding-top:20px;
      font-size:12px;
    }

    #content h1 {
      font-size:20px;
    }

    #content h2 {
      font-size:18px;
    }

    .posts_listing li div{
      font-size:12px;
    }
  }
</style>


    
  </head>

  <body>
    <section id=nav>
      <h1><a href="/">The Data Witch</a></h1>
      <ul>
        
          <li><a href="/about">About</a></li>
        
          <li><a href="https://github.com/wandernat">GitHub</a></li>
        
          <li><a href="https://twitter.com/nlj">Twitter</a></li>
        
      </ul>
    </section>


<section id=content>
  <h1> Note to Self: Using the filter and select functions from the dplyr package </h1>

  <div id=sub-header>
    April 2018 · 3 minute read
  </div>

  <div class="entry-content">
    <p>This is the first post in a series where I write to myself regarding the various data science spells I’m learning. Today’s spell: dplyr’s filter function.</p>
<p>For some reason, upon learning how to filter data with the dplyr package, I thought that function was designed to only remove or discard data, specifically columns. That is not the case and I’m writing this blog post to try and correct this automatic thinking in my brain. If it is of use to my fellow witches, so be it.</p>
<p>First of all, when you just want to select one column, use the select function. For example, let’s check out this dataset of health indicators for all 100 counties in North Carolina from 2001 to 2015. Let’s say I just wanted to learn about access to dentists. I might want to just select the column for dentists per 10,000 in 2014. First let’s read in the data:</p>
<pre class="r"><code>nc_health &lt;- read_delim(here(&quot;static&quot;, &quot;data&quot;, &quot;county-healthy-indicators-2001-2015.csv&quot;), 
                                                  &quot;;&quot;, escape_double = FALSE, trim_ws = TRUE)
## Parsed with column specification:
## cols(
##   .default = col_double(),
##   County = col_character()
## )
## See spec(...) for full column specifications.</code></pre>
<p>Now, let’s select the matching column and then look at the first few rows to see what happened:</p>
<pre class="r"><code>nc_dentists &lt;- nc_health %&gt;%
  select(&quot;County&quot;, &quot;Dentists per 10,000 pop: 2014&quot;)

head(nc_dentists)
## # A tibble: 6 x 2
##   County         `Dentists per 10,000 pop: 2014`
##   &lt;chr&gt;                                    &lt;dbl&gt;
## 1 North Carolina                           4.70 
## 2 Carteret                                 7.21 
## 3 Cleveland                                4.08 
## 4 Chatham                                  1.89 
## 5 Bladen                                   1.71 
## 6 Bertie                                   0.485</code></pre>
<p>As you can see, the two columns passed through select were the only ones pulled into the new data frame.</p>
<p>Now let’s check out the filter function. (Since the dataframe has roughly 80 variables, we’re going to continue using select to return only a few variables.)</p>
<p>Filter is used to return rows matching certain criteria. Let’s say you only wanted to look at the health indicators for counties with a small population. You can use the filter function to return only the counties with a population of less than 50,000:</p>
<pre class="r"><code>small_pop &lt;- nc_health %&gt;%
  select(`County`, `2015 NCHS Bridged Pop: total pop`) %&gt;%
  filter(`2015 NCHS Bridged Pop: total pop` &lt; 50000)

head(small_pop)
## # A tibble: 6 x 2
##   County       `2015 NCHS Bridged Pop: total pop`
##   &lt;chr&gt;                                     &lt;dbl&gt;
## 1 Bladen                                   34318.
## 2 Bertie                                   20199.
## 3 Transylvania                             33211.
## 4 Hyde                                      5526.
## 5 Beaufort                                 47651.
## 6 Anson                                    25759.</code></pre>
<p>You <em>can</em> use filter to discard certain criteria, but you’ll need to cast the exclamation mark (“!”) into your brew. Let’s say you wanted to only view counties with high preterm birth rates. You could exclude counties that have a preterm birth rate less than 10.0 like this:</p>
<pre class="r"><code>most_preterm &lt;- nc_health %&gt;%
  select(`County`, `Phys Assts per 10,000 pop: 2014`, `Preterm Births : 2011-2015`) %&gt;%
  filter(!`Preterm Births : 2011-2015` &lt; 10)

head(most_preterm)
## # A tibble: 6 x 3
##   County         `Phys Assts per 10,000 pop: 2014` `Preterm Births : 2011…
##   &lt;chr&gt;                                      &lt;dbl&gt;                   &lt;dbl&gt;
## 1 North Carolina                              4.81                    10.0
## 2 Carteret                                    4.61                    10.9
## 3 Cleveland                                   2.55                    10.9
## 4 Bladen                                      1.99                    10.6
## 5 Bertie                                      2.43                    13.7
## 6 Cumberland                                  7.62                    10.9</code></pre>
<p>So that’s the basics of the select and filter functions in dplyr. And now hopefully I can remember that filter chooses instead of removes (unless the ! is placed first).</p>

  </div>

  <div id=links>
    
      <a class="basic-alignment left" href="/post/plotting-multiple-lines-on-the-y-axis-of-a-ggplot-graph/">&laquo; Plotting multiple lines on the y axis of a ggplot graph</a>
    
    
  </div>
</section>

  
</body>
</html>



